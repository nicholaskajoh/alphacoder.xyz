<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Image upload with Django and Cloudinary | Alpha Coder</title>

    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    
    <style>body{margin:40px auto;max-width:650px;line-height:1.6;font-family:merriweather,serif;font-size:16px;color:#444;padding:0 10px}h1,h2,h3{line-height:1.2}div.header h1{padding-top:0;padding-bottom:8px;margin-bottom:24px;font-size:15px;font-weight:400;border-bottom:1px solid}.header-menu{float:right}.header-menu a{padding-left:5px}ul.pagination{list-style-type:none;text-align:center;padding:0}ul.pagination>li{padding:0 8px;display:inline-block}div.footer{border-top:1px solid;text-align:center}.footer-links a{padding:0 5px}img{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}a,a:visited,a:hover,a:active{color:#00e}.posts-list li:not(:last-child){padding-bottom:20px}.post-meta a:not(:last-child){padding-right:5px}blockquote{margin-top:10px;margin-bottom:10px;margin-left:50px;padding-left:15px;border-left:3px solid #ccc;background-color:#f9f9f9;font-style:italic}</style>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-82728104-5', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    

    

    <meta property="og:title" content="Image upload with Django and Cloudinary" />
<meta property="og:description" content="Managing files/images can be a hassle. It can be a real pain to have to deal with uploads, storage, manipulation, administration and delivery of media content in every project you start/or are involved in.
Luckily, there are cloud platforms that take away the stress of all that, allowing you to ship faster and deliver your product(s) at scale. Cloudinary is one of such platforms. It tags itself as the media management platform for web and mobile developers — an end-to-end solution for all your image and video needs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://alphacoder.xyz/image-upload-with-django-and-cloudinary/" />
<meta property="article:published_time" content="2018-02-18T08:50:00+00:00" />
<meta property="article:modified_time" content="2018-02-18T08:50:00+00:00" />

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Image upload with Django and Cloudinary"/>
<meta name="twitter:description" content="Managing files/images can be a hassle. It can be a real pain to have to deal with uploads, storage, manipulation, administration and delivery of media content in every project you start/or are involved in.
Luckily, there are cloud platforms that take away the stress of all that, allowing you to ship faster and deliver your product(s) at scale. Cloudinary is one of such platforms. It tags itself as the media management platform for web and mobile developers — an end-to-end solution for all your image and video needs."/>

    <meta itemprop="name" content="Image upload with Django and Cloudinary">
<meta itemprop="description" content="Managing files/images can be a hassle. It can be a real pain to have to deal with uploads, storage, manipulation, administration and delivery of media content in every project you start/or are involved in.
Luckily, there are cloud platforms that take away the stress of all that, allowing you to ship faster and deliver your product(s) at scale. Cloudinary is one of such platforms. It tags itself as the media management platform for web and mobile developers — an end-to-end solution for all your image and video needs.">
<meta itemprop="datePublished" content="2018-02-18T08:50:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-02-18T08:50:00&#43;00:00" />
<meta itemprop="wordCount" content="732">



<meta itemprop="keywords" content="Django," />
</head>


<body>
<div class="header">
    <h1>
        <a href="/">Alpha Coder</a>
        <div class="header-menu">
            <a href="/blog/">Blog</a>
            <a href="/support/">Support</a>
            <a href="/courses/">Courses</a>
        </div>
    </h1>
</div>
<div id="content">

<header>
    <h1>Image upload with Django and Cloudinary</h1>
    

<div class="post-meta">
    <time datetime="2018-02-18">Feb 18, 2018</time>
    | Tags:
    <a href="http://alphacoder.xyz/tag/django/">Django</a>
</div>
</header>
<article>
    <p>Managing files/images can be a hassle. It can be a real pain to have to deal with uploads, storage, manipulation, administration and delivery of media content in every project you start/or are involved in.</p>
<p>Luckily, there are cloud platforms that take away the stress of all that, allowing you to ship faster and deliver your product(s) at scale. Cloudinary is one of such platforms. It tags itself as <em>the media management platform for web and mobile developers — an end-to-end solution for all your image and video needs</em>.</p>
<p>Aside Cloudinary’s easy to use API, I was attracted by their very generous free plan. See for yourself at <a href="https://cloudinary.com/pricing">https://cloudinary.com/pricing</a>.</p>
<p>Learn more about Cloudinary: <a href="https://cloudinary.com/solutions">https://cloudinary.com/solutions</a>.</p>
<p>This is a quick tutorial on how setup image upload with Django and Cloudinary. Let’s roll…</p>
<h2 id="console">Console</h2>
<p>Visit <a href="https://cloudinary.com">Cloudinary.com</a> and create an account or login if you already have one. You’ll be provided a nice dashboard/console at <a href="https://cloudinary.com/console">https://cloudinary.com/console</a>. There you’ll find your account details i.e cloud name, API key and secret.</p>
<p><img src="https://cdn-images-1.medium.com/max/1000/1*ZxPbpbatoeCyZzldXXoX2Q.png" alt=""></p>
<h2 id="install">Install</h2>
<p>Cloudinary has an open source <a href="https://pypi.python.org/pypi/cloudinary">integration library for Python/Django</a>. Install it using pip.</p>
<pre><code>$ pip install cloudinary
</code></pre>
<h2 id="settings">Settings</h2>
<p>Go to your project’s <em>settings.py</em> and make the following additions.</p>
<p>First import cloudinary.</p>
<pre><code>import cloudinary
</code></pre>
<p>Then add cloudinary to installed apps.</p>
<pre><code>INSTALLED_APPS = [
    'cloudinary',
    # other apps
]
</code></pre>
<p>Now add the configs from your console.</p>
<pre><code>cloudinary.config(
    cloud_name = CLOUDINARY_CLOUD_NAME,
    api_key = CLOUDINARY_API_KEY,
    api_secret = CLOUDINARY_API_SECRET
)
</code></pre>
<p>Replace <code>CLOUDINARY_CLOUD_NAME</code>, <code>CLOUDINARY_API_KEY</code> and <code>CLOUDINARY_API_SECRET</code> as appropriate (they should be in quotes e.g <code>cloud_name = &quot;tchalla&quot;</code>).</p>
<h2 id="models">Models</h2>
<p>At any point and in any file in your Django project, you can easily make use of all the functions and classes the Cloudinary Python library provides. For instance, you can upload a file like so.</p>
<pre><code>import cloudinary.uploader

cloudinary.uploader.upload(&quot;my_picture.jpg&quot;)
</code></pre>
<p>See <a href="https://cloudinary.com/documentation/django_image_upload">https://cloudinary.com/documentation/django_image_upload</a> for more info on uploads.</p>
<p>However, you want to handle things the Django way as this would allow you utilize the rich APIs that Django ships with. By “the Django way”, I mean using models (in this case).</p>
<p>In Django, you can use ImageField or FileField in your model. Cloudinary provides CloudinaryField. Let’s create a Photo model using CloudinaryField in <em>models.py</em>.</p>
<pre><code>from django.db import models
from cloudinary.models import CloudinaryField

class Photo(models.Model):
    image = CloudinaryField('image')
    caption = models.CharField(max_length=100, blank=True)

    def __str__(self):
        return self.caption if self.caption != &quot;&quot; else &quot;No caption&quot;
</code></pre>
<p>Additionally, if you want to delete an image from Cloudinary when it’s model instance is deleted in your app (Django/Cloudinary doesn’t do this by default), you can add the following pre-delete signal after your model definition.</p>
<pre><code>@receiver(pre_delete, sender=Photo)
def photo_delete(sender, instance, **kwargs):
    cloudinary.uploader.destroy(instance.image.public_id)
</code></pre>
<p>Then add the following imports at the top of the file.</p>
<pre><code>from django.db.models.signals import pre_delete
import cloudinary
</code></pre>
<h2 id="forms">Forms</h2>
<p>Using ModelForm to create a form from the Photo model, we have:</p>
<pre><code>from django.forms import ModelForm
from .models import Photo

class PhotoForm(ModelForm):
    class Meta:
        model = Photo
        fields = ('image', 'caption', )
</code></pre>
<h2 id="views">Views</h2>
<p>For the view of PhotoForm form, we could have:</p>
<pre><code>from django.shortcuts import render, redirect
from .forms import PhotoForm
from .models import Photo

def add_photo(request):
    if request.method == &quot;POST&quot;:
        form = PhotoForm(request.POST, request.FILES)
        if form.is_valid():
            photo = Photo()
            photo.caption = request.POST.get('caption')
            photo.save()
            return redirect('/photo/' + photo.id)
    else:
        form = PhotoForm()

    return render(request, 'add-photo.html', {'form': form})
</code></pre>
<h2 id="template">Template</h2>
<p>In the upload form template, you can simple do <code>{{ form }}</code> or manually design the HTML form to your taste.</p>
<h2 id="display">Display</h2>
<p>Displaying images from Cloudinary in your app is super simple and straight forward. If we fetch a Photo model instance in a view using <code>photo = Photo.objects.get(id=1)</code>, we can retrieve the image with <code>photo.image</code> which returns a CloudinaryResource object. This object has properties such as public_id, url, size (bytes), format etc.</p>
<p>One way to display the image in a template after passing the photo object from the view is to use the url property.</p>
<pre><code>&lt;img src=&quot;{{ photo.image.url }}&quot;&gt;
</code></pre>
<p>This is great and all but it won’t afford us the opportunity to use the many image transformation options Cloudinary provides. Fortunately, the Cloudinary library provides a template tag we can load up and use.</p>
<pre><code>{% load cloudinary %}{% cloudinary photo.image.public_id className=&quot;my-class&quot; height=200 width=100 %}
</code></pre>
<p>This template tag allows you to not only specify any Cloudinary transformation parameter, but also to specify regular HTML image tag attributes (like <code>title</code> and <code>alt</code>). For instance, we specified the class (className) <code>my-class</code> in the snippet above. This actually generates an image tag. E.g</p>
<pre><code>&lt;img class=&quot;my-class&quot; src=&quot;https://res.cloudinary.com/demo/image/upload/h_200,w_100/sample.jpg&quot; height=&quot;200&quot; width=&quot;100&quot;&gt;
</code></pre>
<p>Read about all the transformation parameters available here: <a href="https://cloudinary.com/documentation/image_transformations">https://cloudinary.com/documentation/image_transformations</a>.</p>
<p>That’s it!</p>

</article>



<p style="font-style: italic;">Need help getting something to work in your project? Try <a href="/support/">Alpha Coder Support</a>!</p>


<form
  style="border: 1px solid #ccc; padding: 3px; text-align: center; border-radius: 2px; margin: 15px 0;"
  action="https://tinyletter.com/nicholaskajoh"
  method="post"
  target="popupwindow" onsubmit="window.open('https://tinyletter.com/nicholaskajoh', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
    <div style="padding: 5px;">
      <h2>Subscribe to the Alpha Coder Newsletter!</h2>

      <p>Get timely updates on new articles, courses and more from Nicholas Kajoh. Unsubscribe anytime.</p>
      
      <input
        type="text"
        style="width: 150px; height: 30px; padding-left: 5px; border: 1px solid #ccc; border-radius: 2px;"
        name="email"
        placeholder="night.king@westeros.org">
      <input type="hidden" value="1" name="embed">
      <input
        type="submit"
        style="height: 34px; color: #fff; background-color: #00e; border: 1px solid #00e; border-radius: 2px;"
        value="Subscribe">
      
      <p>
        Enjoy the content on Alpha Coder? Please <a href="http://buymeacoff.ee/nicholaskajoh" target="_blank">buy me a coffee</a>. 😊
      </p>
    </div>
</form>




  
  
    <p>
      Previous post: <a href="http://alphacoder.xyz/deploy-react-django-app-on-heroku/"><strong>Deploy your React-Django app on Heroku</strong></a>
    </p>
  

  
    <p>
      Next post: <a href="http://alphacoder.xyz/k-means/"><strong>K Means</strong></a>
    </p>
  
  



  <br><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "alphacoderxyz" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



    </div>
<div class="footer">
    
    
    <div class="footer-links">
        <a href="http://twitter.com/nicholaskajoh">Twitter</a>
        <a href="https://github.com/nicholaskajoh">GitHub</a>
        <a href="http://buymeacoff.ee/nicholaskajoh">Buy me a coffee</a>
        <a href="/blog/index.xml">RSS</a>
    </div>
    

    
    
    <div class="copyright">© Nicholas Kajoh</div>
    
</div>


<script src="https://unpkg.com/medium-zoom@1.0.4/dist/medium-zoom.min.js"></script>
<script>
  mediumZoom(document.querySelectorAll('img'));
</script></body>

</html>