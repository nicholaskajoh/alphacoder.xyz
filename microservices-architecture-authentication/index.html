<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Authentication strategies in microservices architecture | Alpha Coder</title>

    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    
    <style>body{margin:40px auto;max-width:650px;line-height:1.6;font-family:merriweather,serif;font-size:16px;color:#444;padding:0 10px}h1,h2,h3{line-height:1.2}div.header h1{padding-top:0;padding-bottom:8px;margin-bottom:24px;font-size:15px;font-weight:400;border-bottom:1px solid}.header-menu{float:right}.header-menu a{padding-left:5px}ul.pagination{list-style-type:none;text-align:center;padding:0}ul.pagination>li{padding:0 8px;display:inline-block}div.footer{border-top:1px solid;text-align:center}.footer-links a{padding:0 5px}img{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}a,a:visited,a:hover,a:active{color:#00e}.posts-list li:not(:last-child){padding-bottom:20px}.post-meta a:not(:last-child){padding-right:5px}blockquote{margin-top:10px;margin-bottom:10px;margin-left:50px;padding-left:15px;border-left:3px solid #ccc;background-color:#f9f9f9;font-style:italic}</style>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-82728104-5', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    

    

    <meta property="og:title" content="Authentication strategies in microservices architecture" />
<meta property="og:description" content="When moving from monolith to microservices or considering microservices for a greenfield project, it&rsquo;s important to evaluate the authentication strategies available to you to find the one most suitable for your system, as authentication is an integral part of how most applications are interacted with.
In this article, I outline the most common auth strategies I&rsquo;ve come across working with microservices, describing how they work and identifying their pros and cons." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://alphacoder.xyz/microservices-architecture-authentication/" />
<meta property="article:published_time" content="2019-09-29T17:37:55+00:00" />
<meta property="article:modified_time" content="2019-09-29T17:37:55+00:00" />

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Authentication strategies in microservices architecture"/>
<meta name="twitter:description" content="When moving from monolith to microservices or considering microservices for a greenfield project, it&rsquo;s important to evaluate the authentication strategies available to you to find the one most suitable for your system, as authentication is an integral part of how most applications are interacted with.
In this article, I outline the most common auth strategies I&rsquo;ve come across working with microservices, describing how they work and identifying their pros and cons."/>

    <meta itemprop="name" content="Authentication strategies in microservices architecture">
<meta itemprop="description" content="When moving from monolith to microservices or considering microservices for a greenfield project, it&rsquo;s important to evaluate the authentication strategies available to you to find the one most suitable for your system, as authentication is an integral part of how most applications are interacted with.
In this article, I outline the most common auth strategies I&rsquo;ve come across working with microservices, describing how they work and identifying their pros and cons.">
<meta itemprop="datePublished" content="2019-09-29T17:37:55&#43;00:00" />
<meta itemprop="dateModified" content="2019-09-29T17:37:55&#43;00:00" />
<meta itemprop="wordCount" content="654">



<meta itemprop="keywords" content="Microservices," />
</head>


<body>
<div class="header">
    <h1>
        <a href="/">Alpha Coder</a>
        <div class="header-menu">
            <a href="/blog/">Blog</a>
            <a href="/support/">Support</a>
            <a href="/courses/">Courses</a>
        </div>
    </h1>
</div>
<div id="content">

<header>
    <h1>Authentication strategies in microservices architecture</h1>
    

<div class="post-meta">
    <time datetime="2019-09-29">Sep 29, 2019</time>
    | Tags:
    <a href="http://alphacoder.xyz/tag/microservices/">Microservices</a>
</div>
</header>
<article>
    <p>When moving from monolith to microservices or considering microservices for a greenfield project, it&rsquo;s important to evaluate the authentication strategies available to you to find the one most suitable for your system, as authentication is an integral part of how most applications are interacted with.</p>
<p>In this article, I outline the most common auth strategies I&rsquo;ve come across working with microservices, describing how they work and identifying their pros and cons.</p>
<h1 id="auth-service">Auth service</h1>
<p>In this strategy, a microservice is created for the purpose of authentication. This service is contacted by downstream services required to authenticate client requests before processing them.</p>
<p><img src="/images/msvc-auth/auth-svc.png" alt=""></p>
<p>Pros:</p>
<ul>
<li>It&rsquo;s easy to implement and reason about, especially when transitioning from a monolith. The auth service is essentially a utility other services reach out to for their authentication needs.</li>
</ul>
<p>Cons:</p>
<ul>
<li>
<p>It introduces a single point of failure. If the auth service is down, the whole application (or most of it) is down.</p>
</li>
<li>
<p>Increased latency. The time taken to make a request to and get a response from the auth service can hurt the average response time of a microservices application negatively.</p>
</li>
</ul>
<h1 id="jwt-verification-per-service">JWT verification per service</h1>
<p>This approach is an extension of the previous strategy and is intended to reduce dependence on the auth service. Authentication primarily involves issuing and verifying tokens. JWT (<a href="https://jwt.io">JSON Web Tokens</a>) can be used to verify tokens without having to hit a database or other persistent storage. This means each service can verify requests on their own. Token issuing is done in the auth service, while verification is handled in every service where it&rsquo;s required. A client library is usually used to share this verification functionality with all the services that need to perform authentication.</p>
<p><img src="/images/msvc-auth/jwt-verifier.png" alt=""></p>
<p>Pros:</p>
<ul>
<li>
<p>There&rsquo;s no single point of failure, auth-wise. The authentication service is only used for issuing tokens. All other services can handle token verification on their own.</p>
</li>
<li>
<p>It&rsquo;s easy to create a client library for token verification which can be shared by all the services that require auth (assuming a single tech stack is used across board).</p>
</li>
</ul>
<p>Cons:</p>
<ul>
<li>
<p>JWT can&rsquo;t be invalidated on-demand. While this is not a problem for some types of applications, it&rsquo;s a deal breaker for others e.g an enterprise app where an admin might want to disable or delete a user or a finance app where a user might want to sign out from one or more devices remotely.</p>
</li>
<li>
<p>Making a change to the verification logic (e.g adding a new permission) requires updating all dependent services. This might be a Herculean task if a large number of services are involved.</p>
</li>
</ul>
<h1 id="token-blacklist-cache">Token blacklist cache</h1>
<p>To compensate for the shortcomings of JWT, a cache can be used to store tokens that need to be invalidated. This means that every service must contact a shared cache to check if a token has been blacklisted after successfully verifying it, before proceeding to execute any auth-protected code.</p>
<p><img src="/images/msvc-auth/token-blacklist-cache.png" alt=""></p>
<p>Pros:</p>
<ul>
<li>JWTs can be invalidated on-demand through blacklisting.</li>
</ul>
<p>Cons:</p>
<ul>
<li>
<p>This strategy is not feasible in a system where each service has its own datastore.</p>
</li>
<li>
<p>If multiple services are allowed to write to the cache, they might erroneously modify token blacklist data, causing problems that might be difficult to detect and fix.</p>
</li>
<li>
<p>The shared cache introduces a single point of failure to the system.</p>
</li>
</ul>
<h1 id="api-gateway-auth">API gateway auth</h1>
<p>Most, if not all, microservices applications use an API gateway. An API gateway is the entry point where client requests go to before being sent to the appropriate API/edge services. The main function of a gateway is routing requests but they can be used for other purposes such as analytics, rate-limiting, data transformation, logging, health monitoring, caching and as you might have already guessed, authentication.</p>
<p><img src="/images/msvc-auth/api-gateway-auth.png" alt=""></p>
<p>Pros:</p>
<ul>
<li>Separation of concerns. Services can communicate freely with each other and do what they need to do as authentication has already been handled downstream by the gateway.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Switching to an API gateway&rsquo;s auth system from an existing application&rsquo;s auth implementation can be difficult and time-consuming.</li>
</ul>

</article>



<p style="font-style: italic;">Need help getting something to work in your project? Try <a href="/support/">Alpha Coder Support</a>!</p>


<form
  style="border: 1px solid #ccc; padding: 3px; text-align: center; border-radius: 2px; margin: 15px 0;"
  action="https://tinyletter.com/nicholaskajoh"
  method="post"
  target="popupwindow" onsubmit="window.open('https://tinyletter.com/nicholaskajoh', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
    <div style="padding: 5px;">
      <h2>Subscribe to the Alpha Coder Newsletter!</h2>

      <p>Get timely updates on new articles, courses and more from Nicholas Kajoh. Unsubscribe anytime.</p>
      
      <input
        type="text"
        style="width: 150px; height: 30px; padding-left: 5px; border: 1px solid #ccc; border-radius: 2px;"
        name="email"
        placeholder="night.king@westeros.org">
      <input type="hidden" value="1" name="embed">
      <input
        type="submit"
        style="height: 34px; color: #fff; background-color: #00e; border: 1px solid #00e; border-radius: 2px;"
        value="Subscribe">
      
      <p>
        Enjoy the content on Alpha Coder? Please <a href="http://buymeacoff.ee/nicholaskajoh" target="_blank">buy me a coffee</a>. ðŸ˜Š
      </p>
    </div>
</form>




  
  
    <p>
      Previous post: <a href="http://alphacoder.xyz/connect-to-host-database-from-docker-container/"><strong>How to connect to a host&#39;s database from inside a Docker container</strong></a>
    </p>
  

  
  



  <br><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "alphacoderxyz" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



    </div>
<div class="footer">
    
    
    <div class="footer-links">
        <a href="http://twitter.com/nicholaskajoh">Twitter</a>
        <a href="https://github.com/nicholaskajoh">GitHub</a>
        <a href="http://buymeacoff.ee/nicholaskajoh">Buy me a coffee</a>
        <a href="/blog/index.xml">RSS</a>
    </div>
    

    
    
    <div class="copyright">Â© Nicholas Kajoh</div>
    
</div>


<script src="https://unpkg.com/medium-zoom@1.0.4/dist/medium-zoom.min.js"></script>
<script>
  mediumZoom(document.querySelectorAll('img'));
</script></body>

</html>